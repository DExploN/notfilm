<?class form{	public static function getCaptcha($array=array()){		return new captcha($array);	}		public static function checkCaptcha(){		if(!session_id())session_start();			if($_SESSION['captcha'.$_POST['captcha_id']]===$_POST['captcha'] && $_POST['captcha']){				unset($_SESSION['captcha'.$_POST['captcha_id']]);				return true;			}else{				\msg::set('captcha_error','Ошибка ввода кода с картинки');				return false;			}	}		public static function select($data,$val=NULL,$extra=NULL,$assocKey=NULL,$assocValue=NULL){		$str="<select $extra>";		if(!$assocKeyNULL && !$assocValue){			foreach($data as $key=>$value){				$tmp='';				if($val!==NULL && $key==$val)$tmp="selected='selected'";				$str.="<option value='$key' $tmp>$value</option>";			}		}else{			foreach($data as $value){				$tmp='';				if($val!==NULL && $value[$assocKey]==$val)$tmp="selected='selected'";				$str.="<option value='".$value[$assocKey]."' $tmp>".$value[$assocValue]."</option>";			}		}		$str.="</select>";		return $str;	}}class captcha{	private $id;	public $img;	public $form;	public $update;	public $width=200;	public $updateText='Обновить код';	public $placeholderText='Введите код с картинки';	protected $path='/main/captcha/captcha.php';	public function __construct($array=array()){		if(isset($array['updateText']))$this->updateText=$array['updateText'];		if(isset($array['placeholderText']))$this->placeholderText=$array['placeholderText'];		if(isset($array['width']))$this->width=$array['width'];		$this->id=md5(rand().'');		$this->img="<img id='captcha".$this->id."' width='".$this->width."' class='captcha_img' src='".$this->path."?captcha_id=".$this->id."' />";		$this->form="<input type='hidden' name='captcha_id' value='".$this->id."' /><input type='text' name='captcha' class='captcha_txt' placeholder='".$this->placeholderText."' alt='Введите код с картинки' />";		$this->update="<span class='captcha_update' style='cursor:pointer' onclick='document.getElementById(\"captcha".$this->id."\").src=document.getElementById(\"captcha".$this->id."\").src'>".$this->updateText."</span>";	}	}?>